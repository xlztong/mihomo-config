# Surge é£æ ¼åˆ†æµé…ç½® - é€‚ç”¨äº Mihomo Party
# è§„åˆ™æ¥æº: https://github.com/blackmatrix7/ios_rule_script

# ==================== ä»£ç†ç»„ ====================
proxy-groups:
  # é“¾å¼ä»£ç†ï¼šğŸ è½åœ°èŠ‚ç‚¹é€šè¿‡ HK ç»„æ‹¨å·ï¼ˆdialer-proxyï¼‰
  - name: ğŸ Chain
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/House.png
    type: select
    use:
      - self
    filter: "ğŸ "

  # ä¸»å‡ºç«™é€‰æ‹©
  - name: Outbound
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Flower.png
    type: select
    proxies:
      - ğŸ Chain
      - HK
      - JP
      - SG
      - US
      - TW
      - Manual
      - DIRECT

  # YouTube - é»˜è®¤èµ°ç¾å›½
  - name: YouTube
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/YouTube.png
    type: select
    proxies:
      - US
      - HK
      - JP
      - SG
      - TW
      - Outbound

  # Telegram - èµ° Outbound
  - name: Telegram
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Telegram.png
    type: select
    proxies:
      - Outbound
      - HK
      - SG
      - US

  # OpenAI/AIæœåŠ¡ - é»˜è®¤èµ°ç¾å›½
  - name: OpenAI
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/OpenAI.png
    type: select
    proxies:
      - US
      - JP
      - SG
      - TW
      - Outbound

  # Final å…œåº• - èµ° Outbound
  - name: Final
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Final.png
    type: select
    proxies:
      - Outbound
      - DIRECT
      - HK
      - US

  # Guard å¹¿å‘Šæ‹¦æˆª/éšç§ä¿æŠ¤
  - name: Guard
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Adblock.png
    type: select
    proxies:
      - REJECT
      - DIRECT
      - Outbound

  # ==================== åœ°åŒºèŠ‚ç‚¹ç»„ ====================
  - name: HK
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/HK.png
    type: url-test
    use:
      - HK
    interval: 300
    tolerance: 50

  - name: JP
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/JP.png
    type: url-test
    use:
      - JP
    interval: 300
    tolerance: 50

  - name: SG
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/SG.png
    type: url-test
    use:
      - SG
    interval: 300
    tolerance: 50

  - name: US
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/US.png
    type: url-test
    use:
      - US
    interval: 300
    tolerance: 50

  - name: TW
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/TW.png
    type: url-test
    use:
      - TW
    interval: 300
    tolerance: 50

  # æ‰‹åŠ¨é€‰æ‹© - åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹
  - name: Manual
    icon: https://testingcf.jsdelivr.net/gh/Orz-3/mini@master/Color/Static.png
    type: select
    include-all: true

proxy-providers:
  # è‡ªæœ‰è®¢é˜…ï¼ˆselfï¼šåªåŒ…å«ğŸ èŠ‚ç‚¹ï¼‰ï¼Œå¹¶ä¸ºå…¶ä¸­æ‰€æœ‰èŠ‚ç‚¹æ³¨å…¥ dialer-proxy=HK
  self:
    type: http
    url: "http://127.0.0.1:38324/download/hkvps?target=ClashMeta&includeUnsupportedProxy=true"
    interval: 3600
    path: ./proxy_providers/self.yaml
    override:
      dialer-proxy: HK

  # åœ°åŒºèŠ‚ç‚¹è®¢é˜… (Sub-Store ç­›é€‰)
  HK:
    type: http
    url: "http://127.0.0.1:38324/download/collection/HK?target=ClashMeta&includeUnsupportedProxy=true"
    interval: 3600
    path: ./proxy_providers/HK.yaml

  JP:
    type: http
    url: "http://127.0.0.1:38324/download/collection/JP?target=ClashMeta&includeUnsupportedProxy=true"
    interval: 3600
    path: ./proxy_providers/JP.yaml

  SG:
    type: http
    url: "http://127.0.0.1:38324/download/collection/SG?target=ClashMeta&includeUnsupportedProxy=true"
    interval: 3600
    path: ./proxy_providers/SG.yaml

  US:
    type: http
    url: "http://127.0.0.1:38324/download/collection/US?target=ClashMeta&includeUnsupportedProxy=true"
    interval: 3600
    path: ./proxy_providers/US.yaml

  TW:
    type: http
    url: "http://127.0.0.1:38324/download/collection/TW?target=ClashMeta&includeUnsupportedProxy=true"
    interval: 3600
    path: ./proxy_providers/TW.yaml

# ==================== è§„åˆ™æä¾›è€… (blackmatrix7) ====================

rule-providers:
  # å¹¿å‘Šæ‹¦æˆª
  Advertising:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising_Classical.yaml
    path: ./ruleset/Advertising.yaml
    interval: 86400

  # éšç§ä¿æŠ¤
  Privacy:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Privacy/Privacy_Classical.yaml
    path: ./ruleset/Privacy.yaml
    interval: 86400


  # YouTube
  YouTube:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/YouTube/YouTube.yaml
    path: ./ruleset/YouTube.yaml
    interval: 86400

  # Google
  Google:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml
    path: ./ruleset/Google.yaml
    interval: 86400

  # Telegram
  Telegram:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml
    path: ./ruleset/Telegram.yaml
    interval: 86400

  # OpenAI
  OpenAI:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/OpenAI.yaml
    interval: 86400

  # Claude
  Claude:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/Claude.yaml
    interval: 86400

  # Copilot
  Copilot:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Copilot/Copilot.yaml
    path: ./ruleset/Copilot.yaml
    interval: 86400

  # Gemini (BardAI)
  Gemini:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/BardAI/BardAI.yaml
    path: ./ruleset/Gemini.yaml
    interval: 86400

  # å›½å¤–ä»£ç†
  Global:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global_Classical.yaml
    path: ./ruleset/Global.yaml
    interval: 86400

  # å›½å†…ç›´è¿
  China:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml
    path: ./ruleset/China.yaml
    interval: 86400

  # å±€åŸŸç½‘/ç›´è¿
  Lan:
    type: http
    behavior: classical
    format: yaml
    url: https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml
    path: ./ruleset/Lan.yaml
    interval: 86400

# ==================== åˆ†æµè§„åˆ™ ====================
rules:
  # SSH ç«¯å£ç›´è¿ï¼ˆé¿å…æœºåœºå±è”½22ç«¯å£ï¼‰
  - DST-PORT,22,DIRECT

  # å±€åŸŸç½‘ç›´è¿
  - RULE-SET,Lan,DIRECT

  # å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,Advertising,Guard
  - RULE-SET,Privacy,Guard

  # AI æœåŠ¡ -> OpenAI ç»„
  - RULE-SET,OpenAI,OpenAI
  - RULE-SET,Claude,OpenAI
  - RULE-SET,Copilot,OpenAI
  - RULE-SET,Gemini,OpenAI

  # YouTube
  - RULE-SET,YouTube,YouTube

  # Google
  - RULE-SET,Google,Outbound

  # Telegram
  - RULE-SET,Telegram,Telegram

  # å›½å¤–ä»£ç†
  - RULE-SET,Global,Outbound

  # ä¸­å›½ç›´è¿
  - RULE-SET,China,DIRECT

  # GeoIP ä¸­å›½ç›´è¿
  - GEOIP,CN,DIRECT

  # å…œåº•è§„åˆ™
  - MATCH,Final
